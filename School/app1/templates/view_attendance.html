{% extends 'dashboard.html' %}
{% block main %}
<div class="row">
  <div class="col-2">
<main>
  <h1 class="visually-hidden">Sidebars examples</h1>

  <div class="d-flex flex-column flex-shrink-0 p-3 text-white bg-dark" style="width: 280px;height: 750px;">
    <a href="/" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none">
      <span class="fs-5">{{username}}</span>
    </a>
    <span class="fs-9">Host Name : {{hostname}} </span>
    <span class="fs-9">IP Address : {{IPAddr}} </span>
    <hr>
    <ul class="nav nav-pills flex-column mb-auto">
      <li class="nav-item">
        <a href="student_dashboard" class="nav-link text-white" aria-current="page">
          <svg class="bi me-2" width="16" height="16"><use xlink:href="#home"/></svg>
          Home
        </a>
      </li>
      <li>
        <a href="view_attendance" class="nav-link active">
          <svg class="bi me-2" width="16" height="16"><use xlink:href="#speedometer2"/></svg>
          View Attendance
        </a>
      </li>
      <li>
        <a href="leave" class="nav-link text-white">
          <svg class="bi me-2" width="16" height="16"><use xlink:href="#table"/></svg>
          Apply for Leave
        </a>
      </li>
      <li>
        <a href="#" class="nav-link text-white">
          <svg class="bi me-2" width="16" height="16"><use xlink:href="#grid"/></svg>
          Feedback Message
        </a>
      </li>
      <li>
        <a href="#" class="nav-link text-white">
          <svg class="bi me-2" width="16" height="16"><use xlink:href="#people-circle"/></svg>
          Report Cards
        </a>
      </li>
      <li>
        <a href="#" class="nav-link text-white">
          <i class="material-icons" style="font-size:20px;color:black">vibration</i>
           &nbsp;Notifications
        </a>
      </li>
    </ul>
    <hr>
    <div class="dropdown">
      <a href="#" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle" id="dropdownUser1" data-bs-toggle="dropdown" aria-expanded="false">
        <img src="https://github.com/mdo.png" alt="" width="32" height="32" class="rounded-circle me-2">
        <strong>{{username}}</strong>
      </a>
      <ul class="dropdown-menu dropdown-menu-dark text-small shadow" aria-labelledby="dropdownUser1">
        <li><a class="dropdown-item" href="#">New project...</a></li>
        <li><a class="dropdown-item" href="#">Settings</a></li>
        <li><a class="dropdown-item" href="logout">Profile</a></li>
        <li><hr class="dropdown-divider"></li>
        <li><a class="dropdown-item" href="{% url 'logout' %}">Sign out</a></li>
      </ul>
    </div>
  </div>
</main>
  </div>
  <div class="col-10  ">
    <br><br>
    <section class="content">
      <div class="container-fluid">
                    <div class="row">
                        <div class="col-lg-12 form-group" >
                          Home
                        </div>
                    </div>
          <div class="row">

          <div class="col-lg-3 col-6">
            <!-- small box -->
            <div class="small-box bg-info card-body">
              <div class="inner">
                <h3 class="card-title">{{len}}</h3>

                <p>Total Attendance</p>
              </div>
              <div class="icon">
                <i class="ion ion-stats-bars"></i>
              </div>
            </div>
          </div>
          <!-- ./col -->
          <div class="col-lg-3 col-6">
            <!-- small box -->
            <div class="small-box bg-success card-body">
              <div class="inner">
                <h3 class="card-title">{{present}}</h3>

                <p>Present</p>
              </div>
              <div class="icon">
                <i class="ion ion-stats-bars"></i>
              </div>
            </div>
          </div>
          <!-- ./col -->
          <div class="col-lg-3 col-6">
            <!-- small box -->
            <div class="small-box bg-danger card-body">
              <div class="inner">
                <h3 class="card-title">{{absent}}</h3>

                <p>Absent</p>
              </div>
              <div class="icon">
                <i class="ion ion-stats-bars"></i>
              </div>
            </div>
          </div>
          <!-- ./col -->
          <div class="col-lg-3 col-6 ">
            <!-- small box -->
            <div class="small-box bg-warning card-body">
              <div class="inner">
                <h3 class="card-title">{{avg}}</h3>

                <p>Average</p>
              </div>
              <div class="icon">
                <i class="ion ion-pie-graph"></i>
              </div>
            </div>
          </div>
          <!-- ./col -->

        </div>
          <div class="row">
              <div class="col-lg-6">
                  <div class="card card-danger">
                      <div class="card-header">
                        <h3 class="card-title">Attendance Chart</h3>
                        <div class="card-tools">
                          <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                          </button>
                          <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                        </div>
                      </div>
                      <div class="card-body">
                            <canvas id="pieChart" style="max-width: 500px;"></canvas>
                      </div>
                      <!-- /.card-body -->
                    </div>
                    <!-- /.card -->
              </div>
            <script>
            //pie
              var ctxP = document.getElementById("pieChart").getContext('2d');
              var myPieChart = new Chart(ctxP, {
                type: 'pie',
                data: {
                  labels: ["Red", "Green", "Yellow", "Grey", "Dark Grey"],
                  datasets: [{
                    data: [2,1],
                    backgroundColor: ["#F7464A", "#46BFBD", "#FDB45C", "#949FB1", "#4D5360"],
                    hoverBackgroundColor: ["#FF5A5E", "#5AD3D1", "#FFC870", "#A8B3C5", "#616774"]
                  }]
                },
                options: {
                  responsive: true
                }
              });
            </script>

              <div class="col-lg-6">
                  <div class="card card-success">
                      <div class="card-header">
                        <h3 class="card-title">All Data</h3>
                        <div class="card-tools">
                          <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                          </button>
                          <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                        </div>
                      </div>
                      <div class="card-body">
                        <div class="chart">
                          <table class="table table-hover">
                            <tr>
                              <th>Date</th>
                              <th>Attendance</th>
                            </tr>
                          {% for i in var %}
                                <tr>
                                  <td>{{i.date_of_attend}}</td>
                                  <td>
                                    {% if i.attending %}
                                        Present
                                    {% else %}
                                        Absent
                                    {% endif %}
                                  </td>
                                </tr>
                          {% endfor %}
                          </table>
                        </div>
                      </div>
                      <!-- /.card-body -->
                    </div>
            <!-- /.card -->
              </div>
          </div>
      </div>
    </section>
  </div>
</div>
{% endblock %}